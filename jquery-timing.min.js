(function(m,i){var c={},d=1,e=m.fn.each,j=m.fn.on||m.fn.bind,n=m.fn.off||m.fn.unbind,h=m.fn.animate,k={};function a(p,q){q=m(q);q.prevObject=p;if(p.length!==q.length){return q}for(var o=0;o<p.length;o++){if(p[o]!==q[o]){return q}}return p}function b(o){var p=[];for(var q=0;q<o.length;q++){p[q]=o[q].d}return p}function f(p,w,t,s){t=t||[];var u={c:p,f:w},q=false,o;function v(x,y){x._canContinue=false;y.then(function(){x.h=a(x.c,x.h);x._canContinue=true;r()})}function r(z){while(!q){try{q=!q;if(s){s(m.makeArray(u.c))}if(u._canContinue==false){return z}if(!u.f.g){if(!t.length){return u.c}var x=t[0].i&&t[0].i(r,u,t)||u;if(x==u){return z}u=x;continue}o=u.c[u.f.g]||k[u.f.g];if(!o){throw'no such method "'+u.f.g+'" on object ('+u.c+")"}if(o.timing&&!u._canContinue){u._canContinue=false;u=o.timing(r,u,t,s)||u}else{if(!o.timing&&!u._canContinue){u.h=u.c[u.f.g].apply(u.c,u.f.a);if(u.h instanceof g){v(u,u.h);continue}}x={c:u.h,f:u.f.h};u._canContinue=false;u.h=null;if(typeof u.b=="function"){u.b.apply(u.c,b(t))}u=x}}catch(y){q=!q;throw y}finally{q=!q}}}return r}function g(q,r,p){this[".methods"]=r;this[".callback"]=p;this._=q._=q;this.length=0;Array.prototype.push.apply(this,m.makeArray(q));for(var o in q){if(!g.prototype[o]&&typeof q[o]=="function"){(function(s){this[o]=g.prototype[o]=function(){this[".methods"].g=s;this[".methods"].a=arguments;this[".methods"]=this[".methods"].h={};return this[".callback"]?this[".callback"](this,s,arguments):this}})(o)}}}m.each(["bind","on","one","live","delegate"],function(p,o){if(m.fn[o]){var q=m.fn[o];m.fn[o]=function(){var r,s={};for(r=0;r<arguments.length;r++){if(typeof arguments[r]=="function"||(arguments[r]&&typeof arguments[r]=="object")||arguments[r]===false){if(arguments[r]!==m){if(typeof arguments[r]=="function"&&m.guid){arguments[r].guid=arguments[r].guid||m.guid++}return q.apply(this,arguments)}break}}Array.prototype.splice.call(arguments,r,1,function(t){return(f(m(this),s,[{d:t}]))()});return new g(q.apply(this,arguments),s)}}});m.fn.animate=function(){if(arguments[arguments.length-1]===m){var o="_timing"+d++;arguments[arguments.length-1]=function(){m(this).trigger(o)};return this.each().one(o).all(h.apply(this,arguments))}return h.apply(this,arguments)};m.each(["wait","repeat","join","then"],function(p,o){m.fn[o]=function(){var r={},q=new g(this,r,f(this,r,[],function(s){q.length=0;Array.prototype.push.apply(q,s)}));return q[o].apply(q,arguments)}});m.fn.join.timing=function(o,q){var p,r=q.c.length;if(typeof q.f.a[0]=="function"){q.b=q.f.a[0]}else{p=q.f.a[0];q.b=q.f.a[1]}q.c.queue(p==null?"fx":p,function(s){q._canContinue=!--r;q.h=q.c;o();s()})};m.fn.then.timing=function(o,p){p.b=p.f.a[0];p.h=p.c;p._canContinue=true};m.fn.wait.timing=function(q,s){var p,o,r;if(typeof s.f.a[0]=="function"){s.b=s.f.a[0]}else{p=s.f.a[0];s.b=s.f.a[1]}if(typeof p=="string"){o=function(){n.call(n.call(s.c,p,o),"__unwait__",r);s.h=m(this);s._canContinue=true;q()};r=function(){n.call(n.call(m(this),p,o),"__unwait__",r);s.c=s.c.not(this);s._canContinue=s.c.length&&s._canContinue};j.call(s.c,p,o)}else{o=i.setTimeout(function(){n.call(s.c,"__unwait__",r);s.h=s.c;s._canContinue=true;q()},Math.max(0,p));r=function(){n.call(m(this),"__unwait__",r);s.c=s.c.not(this);s._canContinue=s.c.length&&s._canContinue;if(!s.c.length){i.clearTimeout(o)}}}j.call(s.c,"__unwait__",r)};m.fn.each=function(q){if(!q||q===m){var p={},o=new g(this,p,f(this,p,[],function(r){o.length=0;Array.prototype.push.apply(o,r)}));return o.each()}return e.apply(this,arguments)};m.fn.each.timing=function(p,s,t,r){if(s.f.a[0]&&s.f.a[0]!==m){s._canContinue=true;s.h=e.apply(s.c,s.fs.a);return}var z=s.c.length,y=z,v,q,x=[],w=[],u={};function o(){for(var A=0;A<z;A++){(x[A])()}return u}for(v in g.prototype){u[v]=o}u.length=z;s.c.each(function(A){var B=t.slice();w[A]=[u[A]=this];B.unshift({d:A,_allAction:function(C){if(!--y){q=C.f.h;p()}},_fixOpenLoop:k.all});x[A]=f(m(this),s.f.h,B,function(D){w[A]=D;u.length=0;for(var C=0;C<z;C++){Array.prototype.push.apply(u,w[C])}if(r){r(m.makeArray(u))}})});s.h=u;s._canContinue=true;s.i=function(){if(!y){t.shift();return{c:a(s.c,u),f:q}}};s.d=z;t.unshift(s)};k.all=function(o){m.extend(o.f,{h:m.extend({},o.f),g:"all",a:[]});o._canContinue=null};k.all.timing=function(o,q,p){if(!p.length||!p[0]._fixOpenLoop){throw".all() method must be used after .each() only"}if(!p[0]._allAction){p[0]._fixOpenLoop(q);return}p[0]._allAction(q)};m.fn.repeat.timing=function(r,u,t){var q,v,s,p;if(typeof u.f.a[0]=="function"){u.b=u.f.a[0]}else{if(typeof u.f.a[1]=="function"){q=u.f.a[0];u.b=u.f.a[1]}else{q=u.f.a[0];v=u.f.a[1];u.b=u.f.a[2]}}function o(){u.h=(this===i)?u.c:(u.h?u.h.add(this):m(this));u._canContinue=true;r()}if(q==null){s=function(){n.call(m(this),"__unrepeat__",s);u.c=u.c.not(this);u.h=u.c;u._canContinue=u.c.length&&u._canContinue;q=u.c.length&&q};v=true;p=i.setTimeout(function(){p=false;r()},0);u.i=function(){if(!p){u.d++;u.h=u.c;u._canContinue=q==null&&u.c.length;return u}}}else{if(typeof q=="string"){s=function(){n.call(m(this),"__unrepeat__",s);u.c=u.c.not(this);u.h=u.h&&u.h.not(this);u._canContinue=u.c.length&&u._canContinue;n.call(m(this),q,o)};j.call(u.c,q,o);u.i=function(){if(u._canContinue){u.d++;return u}}}else{s=function(){n.call(m(this),"__unrepeat__",s);u.c=u.c.not(this);u.h=u.c;u._canContinue=u.c.length&&u._canContinue;if(!u.c.length){i.clearInterval(q)}};q=i.setInterval(o,Math.max(0,q));u.i=function(){if(u._canContinue){u.d++;return u}}}}j.call(u.c,"__unrepeat__",s);u.d=0;u.l=function(w){if(w){s.apply(u.c)}else{if(q==null){o()}}};u._fixOpenLoop=k.until;if(v){o()}t.unshift(u)};k.until=function(o){m.extend(o.f,{h:m.extend({},o.f),g:"until",a:[false]});o._canContinue=null};k.until.timing=function(o,q,p){if(!p.length||!p[0]._fixOpenLoop){throw".until() method must be used after .repeat() only"}if(!p[0].l){p[0]._fixOpenLoop(q);return}var r=!!q&&q.f.a[0];if(r==null){r=!q.c.size()}if(typeof r=="function"){r=r.apply(q.c,b(p))}if(typeof r=="object"){r=r.toString()}if(typeof r=="number"){r=p[0].d>=r-1}if(r){q._canContinue=true;q.h=q.c;p.shift().l(r)}else{q=p[0];q.d++;q.l();return q}};new g(k);m.each(["unwait","unrepeat"],function(p,o){m.fn[o]=function(){return this.trigger("__"+o+"__")}});m.each(["wait","repeat","join","then","unwait","unrepeat"],function(p,o){m[o]=function(){var q=typeof arguments[0]=="string"?Array.prototype.shift.apply(arguments):"";return m.fn[o].apply(c[q]=(c[q]||m("<div>").text(q)),arguments)}});function l(r,u,q){if(typeof r=="string"){q=new Function("x","return ["+r+"\n,x]");r=function(w,v){v=q(w);p.x=v[1];return v[0]}}var o=typeof u=="function",t=typeof r=="function",p=function(v){if(arguments.length==1){p.x=v;if(o){u(v)}}else{return s()}};function s(v){v=o?u():p.x;return t?r(v):v}p.x=0;p._={toString:p.$=p.toString=s.toString=s};p.mod=function(v){return l(function(w){return w%v},p)};p.add=function(v){return l(function(w){return w+v},p)};p.neg=function(){return l("-x",p)};p.$$=function(v){return l(v,p)};m.each("abcdefghij",function(v,w){p[v]=p[w]=function(){p(arguments[v])}});return p}m.$$=i.$$=m.X=l;m.fn.$=function(){var o=m.apply(i,arguments);o.prevObject=this;return o}})(jQuery,window);