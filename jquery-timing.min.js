(function(f){var e="__timeouts",n="__intervals",g={};function d(s,r){s=s||[];for(var q=0;q<s.length;q++){if(s[q]===r){if(q<s.length-1){s[q]=s.pop();q--}else{s.pop()}}}return s}function m(r,q){r=r||[];r.push(q);return r}function j(r){var s={},q={k:g,h:s},t;for(t in r){if(typeof r[t]==="function"){(function(u){s[u]=function(){q=q.next={n:u,a:arguments,k:g};return s}})(t)}}return q}function k(r,t,q){for(var w=r.next,s=t,u=q,x,v;w;w=w.next){x=s[w.n];if(x===b){v=b.call(s,w.a[0],u);if(v){window.clearInterval(u.r);u.x.each(function(){d(f(this).data(n),u.r)});u=v}else{break}}else{if(x===c){c.call(s,w.a[0],w.a[1],u,w);break}else{if(x===h){h.call(s,w.a[0],u,w);break}else{if(x===a){s=a.call(s,w.a[0],u)}else{s=x.apply(s,w.a)}}}}}}function h(u,q,s){var t=this,r=(s&&s.k===g)?s:j(t),v=window.setTimeout(function(){k(r,t,q);t.each(function(){d(f(this).data(e),v)})},Math.max(1,(typeof u==="function"?Number(u.call(t)):u)||0));this.each(function(){f(this).data(e,m(f(this).data(e),v))});return r.h}function l(){this.each(function(){f.each(f(this).data(e)||[],function(){window.clearTimeout(this)})});return this.data(e,[])}function c(v,t,q,s){var u=this,r=(s&&s.k===g)?s:j(u),w=window.setInterval(function(){q.c++;k(r,u,q)},Math.max(1,(typeof v==="function"?Number(v.call(u)):v)||0));q={c:0,x:u,r:w,v:(q&&q.k===g)?q:{},k:g};this.each(function(){f(this).data(n,m(f(this).data(n),w))});if(t){window.setTimeout(function(){q.c++;k(r,u,q)},1)}return r.h}function i(){this.each(function(){f.each(f(this).data(n)||[],function(){window.clearInterval(this)})});return this.data(n,[])}function p(s,u,q){var r=[],t;for(t=q;t&&(t.k===g);t=t.v){r.push(t.c)}return u.apply(s,r)}function b(r,q){if(!q||q.k!==g){throw new Error(".until() method cannot be called without previous use of .repeat()")}if(typeof r==="undefined"){r=this.length<=0}if(typeof r==="function"){r=p(this,r,q)}if(typeof r==="number"){r=q.c>=r}return r?q.v:false}function a(r,q){if(typeof r==="function"){p(this,r,q)}return this}function o(q,s,r){if(typeof q==="undefined"){q=""}g[q]=g[q]||f("<div>");return s.apply(g[q],r)}f.fn.extend({wait:h,unwait:l,repeat:c,unrepeat:i,until:b,now:a});f.extend({wait:function(r,q){return o(q,h,arguments)},unwait:function(q){return o(q,l,arguments)},repeat:function(s,r,q){return o(q,c,arguments)},unrepeat:function(q){return o(q,i,arguments)},now:function(r,q){return o(q,a,arguments)}})})(jQuery);