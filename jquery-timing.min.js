(function(n,j){var p="fx",z={},C=[];function g(G,F){G=G||[];for(var E=0;E<G.length;E++){if(G[E]===F){if(E<G.length-1){G[E]=G.pop();E--}else{G.pop()}}}return G}function x(F,E){F=F||[];F.push(E);return F}function i(H,L,J){var I={f:true,d:H,o:{}},E={},K={},F={b:I,l:[],m:j.setTimeout(function(){F.m=undefined;h(F,I)},0),n:K},G;for(G in H){if(typeof H[G]=="function"){(function(M){K[M]=function(){E=E.k={k:I,d:I.d,j:M,i:arguments};return F.b.f&&(F.b=E)&&h(F)||K}})(G)}}K._=H._=H;return K[L].apply(H,J)}function h(G,L,F){if(L){if(!L.o){return}L.o.h=!F||F===j||L.o.h&&L.o.h.add(F)||n(F);if(G.b!=L){return}}for(var J,I,K,E,H;J=G.b;){E=J.o;H=E&&E.h;I=H&&E.h.length?E.h:J.d;G.n.length=0;C.push.apply(G.n,I.get());if(J.f){if(!G.l[0]){return I}if(!G.m){G.b=G.l[0];G.b.e++;continue}break}if(E){if(H){w(G)}else{break}}K=I[J.j];if(K==v){(H?e:l)(G,J)}else{if(K==q){(H?u:y)(G,J)}else{if(K==A){J.c=J.i[0];w(G)}else{if(K==k){(H?D:r)(G,J)}else{if(K==b&&G.l[0]){if(c(G,J)){w(G);s(G)}else{G.b=G.l[0];G.b.e++;continue}}else{I=K.apply(I,J.i);w(G)}}}}}G.b.d=I}}function w(E,F){F=E.b;if(typeof F.c=="function"){t(E,F.d,F.c)}E.b=F.k}function t(E,G,H,F){F=[];n.each(E.l,function(){F.push(this.e)});return H.apply(G,F)}function l(G,H,F){function E(){h(G,H,this)}if(typeof H.i[0]=="function"){H.c=H.i[0]}else{F=H.i[0];H.c=H.i[1]}H.o=(typeof F=="string")?{a:E,d:H.d.bind(F,E),q:F}:{d:H.d,q:j.setTimeout(E,Math.max(0,F))};H.d.each(function(I,J){n(J).data("__timeouts",x(n(J).data("__timeouts"),H.o))})}function o(E,F){E.d=E.d.not(F);E.h=E.d.length&&E.h&&E.h.not(F);if(E.a){F.unbind(E.q,E.a)}else{if(!E.d.length){j.clearTimeout(E.q)}}F.each(function(G,H){n(H).data("__timeouts",g(n(H).data("__timeouts"),E))})}function e(E,F){o(F.o,F.o.d);F.o=undefined}function y(E,G,F,H){if(typeof G.i[0]=="function"){G.c=G.i[0]}else{F=G.i[0];G.c=G.i[1]}H=C.slice.call(G.d);G.d.queue(F==undefined?p:F,function(I){if(H.length&&!g(H,this).length){h(E,G)}I()});G.o={d:G.d,h:!H.length&&G.d}}function u(E,F){F.o=undefined}function r(G,H,F,I){function E(){h(G,H,this)}if(typeof H.i[0]=="function"){H.c=H.i[0]}else{if(typeof H.i[1]=="function"){F=H.i[0];H.c=H.i[1]}else{F=H.i[0];I=H.i[1];H.c=H.i[2]}}H.o=(F==undefined)?{d:H.d,h:H.d}:(typeof F=="string")?{a:E,d:H.d.bind(F,E),q:F,h:I&&H.d}:{d:H.d,q:j.setInterval(E,Math.max(0,F)),h:I&&H.d};H.d.each(function(J,K){n(K).data("__intervals",x(n(K).data("__intervals"),H.o))});H.e=0;G.l.unshift(H)}function D(E,F){F.o.h=!F.o.q&&F.o.h}function a(E,F){E.d=E.d.not(F);E.h=E.d.length&&E.h&&E.h.not(F);if(E.a){F.unbind(E.q,E.a)}else{if(E.q){if(!E.d.length){j.clearInterval(E.q)}}}F.each(function(G,H){n(H).data("__intervals",g(n(H).data("__intervals"),E))})}function s(E,F){F=E.l.shift();a(F.o,F.o.d);F.o=undefined}function c(E,F,G){G=F.i[0];if(G==undefined){G=!F.d.size()}if(typeof G=="function"){G=t(E,F.d,G)}if(typeof G=="object"){G=G.toString()}return typeof G=="number"?E.l[0].e>=G-1:G}function v(){return i(this,"wait",arguments)}function B(E){E=this;return E.each(function(F){n.each(n(this).data("__timeouts")||[],function(){o(this,E)})})}function k(){return i(this,"repeat",arguments)}function d(E){E=this;return E.each(function(F){n.each(n(this).data("__intervals")||[],function(){a(this,E)})})}function b(){throw".until() method must be used after .repeat() only"}function A(E){E.apply(this);return this}function q(){return i(this,"join",arguments)}function f(E,G,F){if(typeof E=="string"){C.shift.apply(F)}else{E=""}return G.apply(z[E]=(z[E]||n("<div>").text(E)),F)}function m(H,K,G){if(typeof H=="string"){G=new Function("x","return ["+H+"\n,x]");H=function(M,L){L=G(M);F.x=L[1];return L[0]}}var E=typeof K=="function",J=typeof H=="function",F=function(L){if(arguments.length==1){F.x=L;if(E){K(L)}}else{return F.$()}};function I(L){L=E?K():F.x;return J?H(L):L}I.toString=I;n.extend(F,{x:0,$:I,toString:I,_:{toString:F.$},mod:function(L){return m(function(M){return M%L},F)},add:function(L){return m(function(M){return M+L},F)},neg:function(){return m("-x",F)},$$:function(L){return m(L,F)}});n.each("abcdefghij",function(L,M){F[L]=F[M]=function(){F(arguments[L])}});return F}j.$$=m;n.fn.extend({wait:v,unwait:B,repeat:k,unrepeat:d,until:b,then:A,join:q,$:n});n.extend({wait:function(E){return f(E,v,arguments)},unwait:function(E){return f(E,B,arguments)},repeat:function(E){return f(E,k,arguments)},unrepeat:function(E){return f(E,d,arguments)},then:function(E){return f(E,A,arguments)},join:function(E){return f(E,q,arguments)},$$:m})})(jQuery,window);