(function(k,g){var c={},d=k.fn.each,h=k.fn.on||k.fn.bind,l=k.fn.off||k.fn.unbind,i={};function a(n,o){o=k(o);o.prevObject=n;if(n.length!==o.length){return o}for(var m=0;m<n.length;m++){if(n[m]!==o[m]){return o}}return n}function b(m){var n=[];for(var o=0;o<m.length;o++){n[o]=m[o].d}return n}function e(n,u,r,q){r=r||[];var s={c:n,f:u},o=false,m;function t(v,w){v._canContinue=false;w.then(function(){v.h=a(v.c,v.h);v._canContinue=true;p()})}function p(x){while(!o){try{o=!o;if(q){q(k.makeArray(s.c))}if(s._canContinue==false){return x}if(!s.f.g){if(!r.length){return s.c}var v=r[0].i&&r[0].i(p,s,r)||s;if(v==s){return x}s=v;continue}m=s.c[s.f.g]||i[s.f.g];if(!m){throw'no such method "'+s.f.g+'" on object ('+s.c+")"}if(m.timing&&!s._canContinue){s._canContinue=false;s=m.timing(p,s,r,q)||s}else{if(!m.timing&&!s._canContinue){s.h=s.c[s.f.g].apply(s.c,s.f.a);if(s.h instanceof f){t(s,s.h);continue}}v={c:s.h,f:s.f.h};s._canContinue=false;s.h=null;if(typeof s.b=="function"){s.b.apply(s.c,b(r))}s=v}}catch(w){o=!o;throw w}finally{o=!o}}}return p}function f(o,p,n){this[".methods"]=p;this[".callback"]=n;this._=o._=o;this.length=0;Array.prototype.push.apply(this,k.makeArray(o));for(var m in o){if(!f.prototype[m]&&typeof o[m]=="function"){(function(q){this[m]=f.prototype[m]=function(){this[".methods"].g=q;this[".methods"].a=arguments;this[".methods"]=this[".methods"].h={};return this[".callback"]?this[".callback"](this,q,arguments):this}})(m)}}}k.each(["bind","on","one","live","delegate"],function(n,m){if(k.fn[m]){var o=k.fn[m];k.fn[m]=function(){var p,q={};for(p=0;p<arguments.length;p++){if(typeof arguments[p]=="function"||(arguments[p]&&typeof arguments[p]=="object")||arguments[p]===false){if(arguments[p]!==k){if(typeof arguments[p]=="function"&&k.guid){arguments[p].guid=arguments[p].guid||k.guid++}return o.apply(this,arguments)}break}}Array.prototype.splice.call(arguments,p,1,function(r){return(e(k(this),q,[{d:r}]))()});return new f(o.apply(this,arguments),q)}}});k.each(["toggle","animate"],function(n,m){if(k.fn[m]){var o=k.fn[m];k.fn[m]=function(){if(arguments[arguments.length-1]===k){var q={},p=new f(this,q,e(this,q,[],function(r){p.length=0;Array.prototype.push.apply(p,r)}));return p[m].apply(p,arguments)}return o.apply(this,arguments)};k.fn[m].timing=function(q,r){var s=r.c.length,p=Array.prototype.slice.apply(r.f.a);if(p[p.length-1]===k){p[p.length-1]=function(){r._canContinue=!--s;q()}}else{r._canContinue=true}o.apply(r.c,p)}}});k.each(["wait","repeat","join","then"],function(n,m){k.fn[m]=function(){var p={},o=new f(this,p,e(this,p,[],function(q){o.length=0;Array.prototype.push.apply(o,q)}));return o[m].apply(o,arguments)}});k.fn.join.timing=function(m,o){var n,p=o.c.length;if(typeof o.f.a[0]=="function"){o.b=o.f.a[0]}else{n=o.f.a[0];o.b=o.f.a[1]}o.c.queue(n==null?"fx":n,function(q){o._canContinue=!--p;o.h=o.c;m();q()})};k.fn.then.timing=function(m,n){n.b=n.f.a[0];n.h=n.c;n._canContinue=true};k.fn.wait.timing=function(o,q){var n,m,p;if(typeof q.f.a[0]=="function"){q.b=q.f.a[0]}else{n=q.f.a[0];q.b=q.f.a[1]}if(typeof n=="string"){m=function(){l.call(l.call(q.c,n,m),"__unwait__",p);q.h=k(this);q._canContinue=true;o()};p=function(){l.call(l.call(k(this),n,m),"__unwait__",p);q.c=q.c.not(this);q._canContinue=q.c.length&&q._canContinue};h.call(q.c,n,m)}else{m=g.setTimeout(function(){l.call(q.c,"__unwait__",p);q.h=q.c;q._canContinue=true;o()},Math.max(0,n));p=function(){l.call(k(this),"__unwait__",p);q.c=q.c.not(this);q._canContinue=q.c.length&&q._canContinue;if(!q.c.length){g.clearTimeout(m)}}}h.call(q.c,"__unwait__",p)};k.fn.each=function(o){if(!o||o===k){var n={},m=new f(this,n,e(this,n,[],function(p){m.length=0;Array.prototype.push.apply(m,p)}));return m.each()}return d.apply(this,arguments)};k.fn.each.timing=function(n,q,r,p){if(q.f.a[0]&&q.f.a[0]!==k){q._canContinue=true;q.h=d.apply(q.c,q.fs.a);return}var x=q.c.length,w=x,t,o,v=[],u=[],s={};function m(){for(var y=0;y<x;y++){(v[y])()}return s}for(t in f.prototype){s[t]=m}s.length=x;q.c.each(function(y){var z=r.slice();u[y]=[s[y]=this];z.unshift({d:y,_allAction:function(A){if(!--w){o=A.f.h;n()}},_fixOpenLoop:i.all});v[y]=e(k(this),q.f.h,z,function(B){u[y]=B;s.length=0;for(var A=0;A<x;A++){Array.prototype.push.apply(s,u[A])}if(p){p(k.makeArray(s))}})});q.h=s;q._canContinue=true;q.i=function(){if(!w){r.shift();return{c:a(q.c,s),f:o}}};q.d=x;r.unshift(q)};i.all=function(m){k.extend(m.f,{h:k.extend({},m.f),g:"all",a:[]});m._canContinue=null};i.all.timing=function(m,o,n){if(!n.length||!n[0]._fixOpenLoop){throw".all() method must be used after .each() only"}if(!n[0]._allAction){n[0]._fixOpenLoop(o);return}n[0]._allAction(o)};k.fn.repeat.timing=function(p,s,r){var o,t,q,n;if(typeof s.f.a[0]=="function"){s.b=s.f.a[0]}else{if(typeof s.f.a[1]=="function"){o=s.f.a[0];s.b=s.f.a[1]}else{o=s.f.a[0];t=s.f.a[1];s.b=s.f.a[2]}}function m(){s.h=(this===g)?s.c:(s.h?s.h.add(this):k(this));s._canContinue=true;p()}if(o==null){q=function(){l.call(k(this),"__unrepeat__",q);s.c=s.c.not(this);s.h=s.c;s._canContinue=s.c.length&&s._canContinue;o=s.c.length&&o};t=true;n=g.setTimeout(function(){n=false;p()},0);s.i=function(){if(!n){s.d++;s.h=s.c;s._canContinue=o==null&&s.c.length;return s}}}else{if(typeof o=="string"){q=function(){l.call(k(this),"__unrepeat__",q);s.c=s.c.not(this);s.h=s.h&&s.h.not(this);s._canContinue=s.c.length&&s._canContinue;l.call(k(this),o,m)};h.call(s.c,o,m);s.i=function(){if(s._canContinue){s.d++;return s}}}else{q=function(){l.call(k(this),"__unrepeat__",q);s.c=s.c.not(this);s.h=s.c;s._canContinue=s.c.length&&s._canContinue;if(!s.c.length){g.clearInterval(o)}};o=g.setInterval(m,Math.max(0,o));s.i=function(){if(s._canContinue){s.d++;return s}}}}h.call(s.c,"__unrepeat__",q);s.d=0;s.l=function(u){if(u){q.apply(s.c)}else{if(o==null){m()}}};s._fixOpenLoop=i.until;if(t){m()}r.unshift(s)};i.until=function(m){k.extend(m.f,{h:k.extend({},m.f),g:"until",a:[false]});m._canContinue=null};i.until.timing=function(m,o,n){if(!n.length||!n[0]._fixOpenLoop){throw".until() method must be used after .repeat() only"}if(!n[0].l){n[0]._fixOpenLoop(o);return}var p=!!o&&o.f.a[0];if(p==null){p=!o.c.size()}if(typeof p=="function"){p=p.apply(o.c,b(n))}if(typeof p=="object"){p=p.toString()}if(typeof p=="number"){p=n[0].d>=p-1}if(p){o._canContinue=true;o.h=o.c;n.shift().l(p)}else{o=n[0];o.d++;o.l();return o}};new f(i);k.each(["unwait","unrepeat"],function(n,m){k.fn[m]=function(){return this.trigger("__"+m+"__")}});k.each(["wait","repeat","join","then","unwait","unrepeat"],function(n,m){k[m]=function(){var o=typeof arguments[0]=="string"?Array.prototype.shift.apply(arguments):"";return k.fn[m].apply(c[o]=(c[o]||k("<div>").text(o)),arguments)}});function j(p,s,o){if(typeof p=="string"){o=new Function("x","return ["+p+"\n,x]");p=function(u,t){t=o(u);n.x=t[1];return t[0]}}var m=typeof s=="function",r=typeof p=="function",n=function(t){if(arguments.length==1){n.x=t;if(m){s(t)}}else{return q()}};function q(t){t=m?s():n.x;return r?p(t):t}n.x=0;n._={toString:n.$=n.toString=q.toString=q};n.mod=function(t){return j(function(u){return u%t},n)};n.add=function(t){return j(function(u){return u+t},n)};n.neg=function(){return j("-x",n)};n.$$=function(t){return j(t,n)};k.each("abcdefghij",function(t,u){n[t]=n[u]=function(){n(arguments[t])}});return n}k.$$=g.$$=k.X=j;k.fn.$=function(){var m=k.apply(g,arguments);m.prevObject=this;return m}})(jQuery,window);