(function(e,l){var r="fx",B={},E=[];function a(G){return typeof G=="function"}function q(G){return typeof G=="string"}function i(I,H){I=I||[];for(var G=0;G<I.length;G++){if(I[G]===H){if(G<I.length-1){I[G]=I.pop();G--}else{I.pop()}}}return I}function z(H,G){H=H||[];H.push(G);return H}function k(J,N,L){var K={f:true,d:J,o:{}},G={},M={},H={b:K,l:[],m:l.setTimeout(function(){H.m=undefined;j(H,K)},0),n:M},I;for(I in J){if(a(J[I])){(function(O){M[O]=function(){G=G.k={k:K,d:K.d,j:O,i:arguments};return H.b.f&&(H.b=G)&&j(H)||M}})(I)}}M._=J._=J;return M[N].apply(J,L)}function j(I,N,H){if(N){if(!N.o){return}N.o.h=!H||H===l||N.o.h&&N.o.h.add(H)||e(H);if(I.b!=N){return}}for(var L,K,M,G,J;L=I.b;){G=L.o;J=G&&G.h;K=J&&G.h.length?G.h:L.d;I.n.length=0;E.push.apply(I.n,K.get());if(L.f){if(!I.l[0]){return K}if(!I.m){I.b=I.l[0];I.b.e++;continue}break}if(G){if(J){y(I)}else{break}}M=K[L.j];if(M==x){(J?g:n)(I,L)}else{if(M==s){(J?v:A)(I,L)}else{if(M==C){L.c=L.i[0];y(I)}else{if(M==m){(J?F:t)(I,L)}else{if(M==c&&I.l[0]){if(d(I,L)){y(I);u(I)}else{I.b=I.l[0];I.b.e++;continue}}else{K=M.apply(K,L.i);y(I)}}}}}I.b.d=K}}function y(G,H){H=G.b;if(a(H.c)){w(G,H.d,H.c)}G.b=H.k}function w(G,I,J,H){H=[];e.each(G.l,function(){H.push(this.e)});return J.apply(I,H)}function n(I,J,H){function G(){j(I,J,this)}if(a(J.i[0])){J.c=J.i[0]}else{H=J.i[0];J.c=J.i[1]}J.o=q(H)?{a:G,d:J.d.bind(H,G),q:H}:{d:J.d,q:l.setTimeout(G,Math.max(0,H))};J.d.each(function(K,L){e(L).data("__timeouts",z(e(L).data("__timeouts"),J.o))})}function p(G,H){G.d=G.d.not(H);G.h=G.d.length&&G.h&&G.h.not(H);if(G.a){H.unbind(G.q,G.a)}else{if(!G.d.length){l.clearTimeout(G.q)}}H.each(function(I,J){e(J).data("__timeouts",i(e(J).data("__timeouts"),G))})}function g(G,H){p(H.o,H.o.d);H.o=undefined}function A(G,I,H,J){if(a(I.i[0])){I.c=I.i[0]}else{H=I.i[0];I.c=I.i[1]}J=E.slice.call(I.d);I.d.queue(H==undefined?r:H,function(K){if(J.length&&!i(J,this).length){j(G,I)}K()});I.o={d:I.d,h:!J.length&&I.d}}function v(G,H){H.o=undefined}function t(I,J,H,K){function G(){j(I,J,this)}if(a(J.i[0])){J.c=J.i[0]}else{if(a(J.i[1])){H=J.i[0];J.c=J.i[1]}else{H=J.i[0];K=J.i[1];J.c=J.i[2]}}J.o=(H==undefined)?{d:J.d,h:J.d}:q(H)?{a:G,d:J.d.bind(H,G),q:H,h:K&&J.d}:{d:J.d,q:l.setInterval(G,Math.max(0,H)),h:K&&J.d};J.d.each(function(L,M){e(M).data("__intervals",z(e(M).data("__intervals"),J.o))});J.e=0;I.l.unshift(J)}function F(G,H){H.o.h=!H.o.q&&H.o.h}function b(G,H){G.d=G.d.not(H);G.h=G.d.length&&G.h&&G.h.not(H);if(G.a){H.unbind(G.q,G.a)}else{if(G.q){if(!G.d.length){l.clearInterval(G.q)}}}H.each(function(I,J){e(J).data("__intervals",i(e(J).data("__intervals"),G))})}function u(G,H){H=G.l.shift();b(H.o,H.o.d);H.o=undefined}function d(G,H,I){I=H.i[0];if(I==undefined){I=!H.d.size()}if(a(I)){I=w(G,H.d,I)}if(typeof I=="object"){I=I.toString()}return typeof I=="number"?G.l[0].e>=I-1:I}function x(){return k(this,"wait",arguments)}function D(G){G=this;return G.each(function(H){e.each(e(this).data("__timeouts")||[],function(){p(this,G)})})}function m(){return k(this,"repeat",arguments)}function f(G){G=this;return G.each(function(H){e.each(e(this).data("__intervals")||[],function(){b(this,G)})})}function c(){throw".until() method must be used after .repeat() only"}function C(G){G.apply(this);return this}function s(){return k(this,"join",arguments)}function h(G,I,H){if(q(G)){E.shift.apply(H)}else{G=""}return I.apply(B[G]=(B[G]||e("<div>").text(G)),H)}function o(J,M,I){if(q(J)){I=new Function("x","return ["+J+"\n,x]");J=function(O,N){N=I(O);H.x=N[1];return N[0]}}var G=a(M),L=a(J),H=function(N){if(arguments.length==1){H.x=N;if(G){M(N)}}else{return H.$()}};function K(N){N=G?M():H.x;return L?J(N):N}K.toString=K;e.extend(H,{x:0,$:K,toString:K,_:{toString:H.$},mod:function(N){return o(function(O){return O%N},H)},add:function(N){return o(function(O){return O+N},H)},neg:function(){return o("-x",H)},$$:function(N){return o(N,H)}});e.each("abcdefghij",function(N,O){H[N]=H[O]=function(){H(arguments[N])}});return H}l.$$=o;e.fn.extend({wait:x,unwait:D,repeat:m,unrepeat:f,until:c,then:C,join:s,$:e});e.extend({wait:function(G){return h(G,x,arguments)},unwait:function(G){return h(G,D,arguments)},repeat:function(G){return h(G,m,arguments)},unrepeat:function(G){return h(G,f,arguments)},then:function(G){return h(G,C,arguments)},join:function(G){return h(G,s,arguments)},$$:o})})(jQuery,window);