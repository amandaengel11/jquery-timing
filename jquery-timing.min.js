(function(f){var d="__timeouts",m="__intervals",e={};function c(p,o){p=p||[];for(var n=0;n<p.length;n++){if(p[n]===o){if(n<p.length-1){p[n]=p.pop();n--}else{p.pop()}}}return p}function l(o,n){o=o||[];o.push(n);return o}function i(o){var p={},n={k:e,h:p},q;for(q in o){if(typeof o[q]==="function"){(function(r){p[r]=function(){n=n.next={n:r,a:arguments,k:e};return p}})(q)}}return n}function j(o,q,n){for(var t=o.next,p=q,r=n,u,s;t;t=t.next){u=p[t.n];if(u===a){s=a.call(p,t.a[0],r);if(s){window.clearInterval(r.r);r.x.each(function(){c(f(this).data(m),r.r)});r=s}else{break}}else{if(u===b){b.call(p,t.a[0],t.a[1],r,t);break}else{if(u===g){g.call(p,t.a[0],r,t);break}else{p=u.apply(p,t.a)}}}}}function g(r,n,p){var q=this,o=(p&&p.k===e)?p:i(q),s=window.setTimeout(function(){j(o,q,n);q.each(function(){c(f(this).data(d),s)})},Math.max(1,(typeof r==="function"?Number(r.call(q)):r)||0));this.each(function(){f(this).data(d,l(f(this).data(d),s))});return o.h}function k(){this.each(function(){f.each(f(this).data(d)||[],function(){window.clearTimeout(this)})});return this.data(d,[])}function b(s,q,n,p){var r=this,o=(p&&p.k===e)?p:i(r),t=window.setInterval(function(){n.c++;j(o,r,n)},Math.max(1,(typeof s==="function"?Number(s.call(r)):s)||0));n={c:0,x:r,r:t,v:(n&&n.k===e)?n:{},k:e};this.each(function(){f(this).data(m,l(f(this).data(m),t))});if(q){window.setTimeout(function(){n.c++;j(o,r,n)},1)}return o.h}function h(){this.each(function(){f.each(f(this).data(m)||[],function(){window.clearInterval(this)})});return this.data(m,[])}function a(o,n){if(!n||n.k!==e){throw new Error(".until() method cannot be called without previous use of .repeat()")}if(typeof o==="undefined"){o=this.length<=0}if(typeof o==="function"){o=o.call(this,n.c)}if(typeof o==="number"){o=n.c>=o}return o?n.v:false}f.fn.extend({wait:g,unwait:k,repeat:b,unrepeat:h,until:a})})(jQuery);