(function(q,l){var f={},i={};function j(s,w,t){var y={c:s,f:w},z=[],x=l.setTimeout(function(){x=null;v()},0),r,u;function A(){y.j=y.j&&0;if(typeof y.b=="function"){e(z,y.c,y.b)}y={f:y.f.h,c:s}}function v(){while(true){s=y.j||y.c;if(t){t(s.get())}if(y.j==0){return}if(y.f.g){r=s[y.f.g];if(!r){throw"no such method: "+y.f.g}if(r._timing){u=!!y.j||r._timing(v,y,z);if(u===true){A()}else{y=u||y}}else{s=r.apply(s,y.f.a);A()}}else{if(!z[0]){return s}if(x){return}y=b._timing(v,false,z)}}}return v}function m(u,s,r){var v={},t;for(t in u){if(typeof u[t]=="function"){i[t]=t}}$.each(i,function(w){v[w]=function(){s.g=w;s.a=arguments;s=s.h={};return r&&r()||v}});v._=u._=u;return v}m(new Object());m(new Array());m(new String());m(new Function());function a(t){var r={},u,s=j(t,r,function(v){u.length=0;Array.prototype.push.apply(u,v)});return u=m(t,r,s)}function e(s,r,t){return t.apply(r,q(s).map(function(){return this.d}).get())}function h(){return a(this).wait.apply(this,arguments)}h._timing=function(t,v){var s,r,u;v.j=0;if(typeof v.f.a[0]=="function"){v.b=v.f.a[0]}else{s=v.f.a[0];v.b=v.f.a[1]}if(typeof s=="string"){r=function(){q(this).unbind(s,r).unbind("__unwait__",u);v.j=v.j&&v.j.add(this)||q(this);t()};u=function(){q(this).unbind("__unwait__",u);v.c=v.c.not(this);v.j=v.c.length&&v.j&&v.j.not(this);q(this).unbind(s,r)};v.c.bind(s,r)}else{r=l.setTimeout(function(){v.c.unbind("__unwait__",u);v.j=v.c;t()},Math.max(0,s));u=function(){q(this).unbind("__unwait__",u);v.c=v.c.not(this);v.j=v.c.length&&v.j&&v.j.not(this);if(!v.c.length){l.clearTimeout(r)}}}v.c.bind("__unwait__",u)};function o(){return this.trigger("__unwait__")}function c(){return a(this).repeat.apply(this,arguments)}c._timing=function(t,w,v,x){var s,r,u;w.j=0;if(typeof w.f.a[0]=="function"){w.b=w.f.a[0]}else{if(typeof w.f.a[1]=="function"){s=w.f.a[0];w.b=w.f.a[1]}else{s=w.f.a[0];w.j=!!w.f.a[1]&&w.c;w.b=w.f.a[2]}}if(s==null){r=true;u=function(){q(this).unbind("__unrepeat__",u);w.c=w.c.not(this);w.j=w.c.length&&w.j&&w.j.not(this);r=w.c.length&&r};w.l=function(y){if(!y&&r){w.j=w.c}else{w.c.unbind("__unrepeat__",u)}};w.j=w.c}else{if(typeof s=="string"){r=function(){w.j=w.j&&w.j.add(this)||q(this);t()};u=function(){q(this).unbind("__unrepeat__",u);w.c=w.c.not(this);w.j=w.c.length&&w.j&&w.j.not(this);q(this).unbind(s,r)};w.l=function(y){if(y){w.c.unbind("__unrepeat__",u).unbind(s,r)}};w.c.bind(s,r)}else{r=l.setInterval(function(){w.j=w.c;t()},Math.max(0,s));u=function(){q(this).unbind("__unrepeat__",u);w.c=w.c.not(this);w.j=w.c.length&&w.j&&w.j.not(this);if(!w.c.length){l.clearInterval(r)}};w.l=function(y){if(y){w.c.unbind("__unrepeat__",u);l.clearInterval(r)}}}}w.c.bind("__unrepeat__",u);w.d=0;v.unshift(w)};function n(){return this.trigger("__unrepeat__")}function b(){throw".until() method must be used after .repeat() only"}b._timing=function(r,t,s){var u=t&&t.f.a[0];if(u==null){u=!t.c.size()}if(typeof u=="function"){u=e(s,t.c,u)}if(typeof u=="object"){u=u.toString()}if(typeof u=="number"){u=s[0].d>=u-1}if(u){t=s.shift();t.l(true);return true}else{t=s[0];t.d++;t.l();return t}};function g(r){r.apply(this);return this}g._timing=function(r,s){s.b=s.f.a[0];return true};function d(){return a(this).join.apply(this,arguments)}d._timing=function(r,u){var s,t,v=q(u.c);u.j=0;if(typeof u.f.a[0]=="function"){u.b=u.f.a[0]}else{t=u.f.a[0];u.b=u.f.a[1]}u.c.queue(t==null?"fx":t,function(w){if(v.length&&!(v=v.not(this)).length){u.j=u.c;if(s){r()}}w()});s=true};$.each(["bind","on","one"],function(s,r){var t=q.fn[r];q.fn[r]=t&&function(w){if(typeof w!="object"){var u,x,v;for(x=1;x<arguments.length;x++){if(typeof arguments[x]=="function"){if(arguments[x]!==q){arguments[x].guid=arguments[x].guid||q.guid++;u=true}break}}if(!u){v={};arguments[x]=function(){return(j(q(this),v))()};arguments.length=Math.max(arguments.length,x+1);return m(t.apply(this,arguments),v)}}return t.apply(this,arguments)}});function k(s,t,r){if(typeof s=="string"){Array.prototype.shift.apply(r)}else{s=""}return t.apply(f[s]=(f[s]||q("<div>").text(s)),r)}function p(u,x,t){if(typeof u=="string"){t=new Function("x","return ["+u+"\n,x]");u=function(z,y){y=t(z);s.x=y[1];return y[0]}}var r=typeof x=="function",w=typeof u=="function",s=function(y){if(arguments.length==1){s.x=y;if(r){x(y)}}else{return s.$()}};function v(y){y=r?x():s.x;return w?u(y):y}v.toString=v;q.extend(s,{x:0,$:v,toString:v,_:{toString:s.$},mod:function(y){return p(function(z){return z%y},s)},add:function(y){return p(function(z){return z+y},s)},neg:function(){return p("-x",s)},$$:function(y){return p(y,s)}});q.each("abcdefghij",function(y,z){s[y]=s[z]=function(){s(arguments[y])}});return s}l.$$=p;q.fn.extend({wait:h,unwait:o,repeat:c,unrepeat:n,until:b,then:g,join:d,$:q});q.extend({wait:function(r){return k(r,h,arguments)},unwait:function(r){return k(r,o,arguments)},repeat:function(r){return k(r,c,arguments)},unrepeat:function(r){return k(r,n,arguments)},then:function(r){return k(r,g,arguments)},join:function(r){return k(r,d,arguments)},$$:p})})(jQuery,window);