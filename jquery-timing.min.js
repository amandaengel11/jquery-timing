(function(j,f){var p={};function e(u,A,v){var F={b:u},w={},D={},z=F,B=[],y=f.setTimeout(function(){y=undefined;if(z==F){x()}},0),x=function(K){if(K){if(!K.l||z!=K){return}}for(var I,H,J,G;I=z;){G=I.l&&I.i;H=G||I.b;D.length=0;Array.prototype.push.apply(D,H.get());if(I==F){if(!B[0]){return H}if(!y){t(z=B[0]);continue}return}if(I.l){if(G){C()}else{return}}J=H[I.f];if(J==o){if(!G){h(x,I)}}else{if(J==k){if(!G){q(x,I)}}else{if(J==g){if(!G){l(x,I,B.unshift(I))}}else{if(J==a&&B[0]){if(b(B,I)){C();n(B.shift())}else{t(z=B[0]);continue}}else{if(J==r){I.a=I.e[0];C()}else{H=J.apply(H,I.e);C()}}}}}z.b=H}},E;function C(){z.l=z.i=undefined;if(typeof z.a=="function"){m(B,z.b,z.a)}z=z.g}for(E in u){if(typeof u[E]=="function"){(function(G){D[G]=function(){w=w.g={g:F,b:F.b,f:G,e:arguments};return z==F&&(z=w)&&x()||D}})(E)}}D._=u._=u;return D[A].apply(u,v)}function m(v,u,w){return w.apply(u,j(v).map(function(){return this.c}).get())}function h(w,z){var v,u,x,y;if(typeof z.e[0]=="function"){z.a=z.e[0]}else{v=z.e[0];z.a=z.e[1]}if(typeof v=="string"){u=function(){j(this).unbind("__unwait__",x).unbind(v,u);z.i=z.i&&z.i.add(this)||j(this);w(z)};x=function(){j(this).unbind("__unwait__",x).unbind(v,u);z.i=z.i&&z.i.not(this)};z.b.bind(v,u).bind("__unwait__",x)}else{u=function(){z.b.unbind("__unwait__",x);z.i=z.b;w(z)};x=function(){j(this).unbind("__unwait__",x);z.b=z.b.not(this);if(!z.b.length){f.clearTimeout(y)}};y=f.setTimeout(u,Math.max(0,v));z.b.bind("__unwait__",x)}z.l=true}function q(u,w){var v,x=j(w.b);if(typeof w.e[0]=="function"){w.a=w.e[0]}else{v=w.e[0];w.a=w.e[1]}w.b.queue(v==undefined?"fx":v,function(y){if(x.length&&!(x=x.not(this)).length){w.i=w.b;u(w)}y()});w.l=true}function l(w,x){var v,y,u;if(typeof x.e[0]=="function"){x.a=x.e[0]}else{if(typeof x.e[1]=="function"){v=x.e[0];x.a=x.e[1]}else{v=x.e[0];y=x.e[1];x.a=x.e[2]}}if(v==undefined){x.k=function(){j(this).unbind("__unrepeat__",x.k);x.b=x.b.not(this);if(!x.b.length){x.h=undefined}};x.h=y=true;x.b.bind("__unrepeat__",x.k)}else{if(typeof v=="string"){u=function(){x.i=x.i&&x.i.add(this)||j(this);w(x)};x.k=function(){j(this).unbind("__unrepeat__",x.k).unbind(v,u);x.i=x.i&&x.i.not(this)};x.b.bind(v,u).bind("__unrepeat__",x.k)}else{x.k=function(){j(this).unbind("__unrepeat__",x.k);x.b=x.b.not(this);if(!x.b.length){f.clearInterval(x.d)}};x.d=f.setInterval(function(){x.i=x.b;w(x)},Math.max(0,v));x.b.bind("__unrepeat__",x.k)}}if(y){x.i=x.b}x.c=0;x.l=true}function t(u){u.c++;u.l=true;if(u.h){u.i=u.b}}function n(u){u.b.unbind("__unrepeat__",u.k);if(u.d){f.clearInterval(u.d)}}function b(v,u){var w=u.e[0];if(w==undefined){w=!u.b.size()}if(typeof w=="function"){w=m(v,u.b,w)}if(typeof w=="object"){w=w.toString()}return typeof w=="number"?v[0].c>=w-1:w}function o(){return e(this,"wait",arguments)}function s(){return this.trigger("__unwait__")}function g(){return e(this,"repeat",arguments)}function c(u){return this.trigger("__unrepeat__")}function a(){throw".until() method must be used after .repeat() only"}function r(u){u.apply(this);return this}function k(){return e(this,"join",arguments)}function d(u,w,v){if(typeof u=="string"){ARRAY.shift.apply(v)}else{u=""}return w.apply(p[u]=(p[u]||j("<div>").text(u)),v)}function i(x,A,w){if(typeof x=="string"){w=new Function("x","return ["+x+"\n,x]");x=function(C,B){B=w(C);v.x=B[1];return B[0]}}var u=typeof A=="function",z=typeof x=="function",v=function(B){if(arguments.length==1){v.x=B;if(u){A(B)}}else{return v.$()}};function y(B){B=u?A():v.x;return z?x(B):B}y.toString=y;j.extend(v,{x:0,$:y,toString:y,_:{toString:v.$},mod:function(B){return i(function(C){return C%B},v)},add:function(B){return i(function(C){return C+B},v)},neg:function(){return i("-x",v)},$$:function(B){return i(B,v)}});j.each("abcdefghij",function(B,C){v[B]=v[C]=function(){v(arguments[B])}});return v}f.$$=i;j.fn.extend({wait:o,unwait:s,repeat:g,unrepeat:c,until:a,then:r,join:k,$:j});j.extend({wait:function(u){return d(u,o,arguments)},unwait:function(u){return d(u,s,arguments)},repeat:function(u){return d(u,g,arguments)},unrepeat:function(u){return d(u,c,arguments)},then:function(u){return d(u,r,arguments)},join:function(u){return d(u,k,arguments)},$$:i})})(jQuery,window);