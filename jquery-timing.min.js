(function(z,G){var L="__timeouts",B="__intervals",A=undefined,w=true,F="fx",o={},E=G.setTimeout,u=G.clearTimeout,f=G.setInterval,M=G.clearInterval;function k(N){return typeof N=="function"}function h(N){return typeof N=="string"}function v(P,O){P=P||[];for(var N=0;N<P.length;N++){if(P[N]===O){if(N<P.length-1){P[N]=P.pop();N--}else{P.pop()}}}return P}function H(O,N){O=O||[];O.push(N);return O}function J(O,T,Q){var P={f:w,n:{}},N={k:P,d:O,j:T,i:Q},S={b:N,l:[],m:E(function(){S.m=A;D(S,P)},0)},R={};for(key in O){if(k(O[key])){(function(U){R[U]=function(){N=N.k={k:P,d:P.d,j:U,i:arguments};if(S.b.f){S.b=N;D(S)}return R}})(key)}}D(S);return R}function D(Q,S){if(S){S.n.h=w;if(Q.b!=S){return}}for(var P,O,R,N;P=Q.b;){if(P.f){if(Q.l[0]&&!Q.m){Q.b=Q.l[0];Q.b.e++;continue}break}N=P.n;if(N){if(N.h&&!N.g){m(Q)}else{break}}O=P.d;R=O[P.j];if(R==c){(N&&N.h?d:C)(Q,P)}else{if(R==g){(N&&N.h?K:s)(Q,P)}else{if(R==r){P.c=P.i[0];m(Q)}else{if(R==y){(N&&N.h?b:p)(Q,P)}else{if(R==i&&Q.l[0]){if(j(Q,P)){m(Q);e(Q)}else{Q.b=Q.l[0];Q.b.e++;continue}}else{O=R.apply(O,P.i);m(Q)}}}}}Q.b.d=O}}function m(O,N){N=O.b;if(k(N.c)){t(O,N.d,N.c)}O.b=N.k}function t(P,O,Q,N){N=[];z.each(P.l,function(){N.push(this.e)});return Q.apply(O,N)}function C(Q,P,O){function N(){D(Q,P)}if(k(P.i[0])){P.c=P.i[0]}else{O=P.i[0];P.c=P.i[1]}P.n=h(O)?{o:"event",a:N,d:P.d.bind(O,N),p:O}:{o:"timer",a:N,p:E(N,Math.max(0,O))};P.d.each(function(R,S){z(S).data(L,H(z(S).data(L),P.n))})}function x(N){if(N.o=="event"){N.d.unbind(N.p,N.a)}else{u(N.p)}N.g=w}function d(O,N){x(N.n);N.d.each(function(P,Q){z(Q).data(L,v(z(Q).data(L),N.n))});N.n=A}function s(P,O,N){if(k(O.i[0])){O.c=O.i[0]}else{N=O.i[0];O.c=O.i[1]}O.n={};O.d.queue(N==A?F:N,function(Q){D(P,O);Q()})}function K(O,N){N.n=A}function p(R,P,O,Q){function N(){D(R,P)}if(k(P.i[0])){P.c=P.i[0]}else{if(k(P.i[1])){O=P.i[0];P.c=P.i[1]}else{O=P.i[0];Q=P.i[1];P.c=P.i[2]}}P.n=O==A?{h:w}:h(O)?{o:"event",a:N,d:P.d.bind(O,N),p:O,h:Q}:{o:"timer",a:N,p:f(N,Math.max(0,O)),h:Q};P.d.each(function(S,T){z(T).data(B,H(z(T).data(B),P.n))});P.e=0;R.l.unshift(P)}function b(O,N){N.n.h=!N.n.o}function q(N){if(N.o=="event"){N.d.unbind(N.p,N.a)}if(N.o=="timer"){M(N.p)}N.g=w}function e(O,N){N=O.l.shift();q(N.n);N.d.each(function(P,Q){z(Q).data(B,v(z(Q).data(B),N.n))});N.n=A}function j(O,N,P){P=N.i[0];if(P==A){P=!N.d.size()}if(k(P)){P=t(O,N.d,P)}if(typeof P=="object"){P=P.toString()}return typeof P=="number"?O.l[0].e>=P-1:P}function c(){return J(this,"wait",arguments)}function n(){return this.each(function(N){N=z(this).data(L);while(N&&N.length){x(N.pop())}})}function y(){return J(this,"repeat",arguments)}function a(){return this.each(function(N){N=z(this).data(B);while(N&&N.length){q(N.pop())}})}function i(){throw".until() method must be used after .repeat() only"}function r(N){N.apply(this);return this}function g(){return J(this,"join",arguments)}function l(N,P,O){if(h(N)){Array.prototype.shift.apply(O)}else{N=""}return P.apply(o[N]=(o[N]||z("<div>").text(N)),O)}z.fn.extend({wait:c,unwait:n,repeat:y,unrepeat:a,until:i,then:r,join:g,$:z});z.extend({wait:function(N){return l(N,c,arguments)},unwait:function(N){return l(N,n,arguments)},repeat:function(N){return l(N,y,arguments)},unrepeat:function(N){return l(N,a,arguments)},then:function(N){return l(N,r,arguments)},join:function(N){return l(N,g,arguments)}});function I(Q,O){if(h(Q)){Q=new Function("x","return "+Q)}var N=k(O),R=k(Q),P=function(S){if(arguments.length){P.value=S;if(N){O(S)}}return P.toString()};P.toString=function(){var S=N?O():P.value;return R?Q(S):S};P.$={toString:P.toString};P.mod=function(S){return I(function(T){return T%S},P)};P.plus=function(S){return I(function(T){return T+S},P)};P.neg=function(){return I(function(S){return -S},P)};return P}G.$$=I})(jQuery,window);