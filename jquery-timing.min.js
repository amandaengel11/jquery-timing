(function(j,g){var c={},d=j.fn.each,h={};function a(l,m){m=j(m);m.prevObject=l;if(l.length!==m.length){return m}for(var k=0;k<l.length;k++){if(l[k]!==m[k]){return m}}return l}function b(k){var l=[];for(var m=0;m<k.length;m++){l[m]=k[m].d}return l}function e(l,s,p,o){p=p||[];var q={c:l,f:s},m=false,k;function r(t,u){t._canContinue=false;u.then(function(){t.h=a(t.c,t.h);t._canContinue=true;n()})}function n(v){while(!m){try{m=!m;if(o){o(j.makeArray(q.c))}if(q._canContinue==false){return v}if(!q.f.g){if(!p.length){return q.c}var t=p[0].i&&p[0].i(n,q,p)||q;if(t==q){return v}q=t;continue}k=q.c[q.f.g]||h[q.f.g];if(!k){throw'no such method "'+q.f.g+'" on object ('+q.c+")"}if(k.timing&&!q._canContinue){q._canContinue=false;q=k.timing(n,q,p,o)||q}else{if(!k.timing&&!q._canContinue){q.h=q.c[q.f.g].apply(q.c,q.f.a);if(q.h instanceof f){r(q,q.h);continue}}t={c:q.h,f:q.f.h};q._canContinue=false;q.h=null;if(typeof q.b=="function"){q.b.apply(q.c,b(p))}q=t}}catch(u){m=!m;throw u}finally{m=!m}}}return n}function f(m,n,l){this[".methods"]=n;this[".callback"]=l;this._=m._=m;this.length=0;Array.prototype.push.apply(this,j.makeArray(m));for(var k in m){if(!f.prototype[k]&&typeof m[k]=="function"){(function(o){this[k]=f.prototype[k]=function(){this[".methods"].g=o;this[".methods"].a=arguments;this[".methods"]=this[".methods"].h={};return this[".callback"]?this[".callback"](this,o,arguments):this}})(k)}}}j.each(["bind","on","one","live","delegate"],function(l,k){if(j.fn[k]){var m=j.fn[k];j.fn[k]=function(){var n,o={};for(n=0;n<arguments.length;n++){if(typeof arguments[n]=="function"||(arguments[n]&&typeof arguments[n]=="object")||arguments[n]===false){if(arguments[n]!==j){if(typeof arguments[n]=="function"&&j.guid){arguments[n].guid=arguments[n].guid||j.guid++}return m.apply(this,arguments)}break}}Array.prototype.splice.call(arguments,n,1,function(p){return(e(j(this),o,[{d:p}]))()});return new f(m.apply(this,arguments),o)}}});j.each(["toggle","animate"],function(l,k){if(j.fn[k]){var m=j.fn[k];j.fn[k]=function(){if(arguments[arguments.length-1]===j){var o={},n=new f(this,o,e(this,o,[],function(p){n.length=0;Array.prototype.push.apply(n,p)}));return n[k].apply(n,arguments)}return m.apply(this,arguments)};j.fn[k].timing=function(o,p){var q=p.c.length,n=Array.prototype.slice.apply(p.f.a);if(n[n.length-1]===j){n[n.length-1]=function(){p._canContinue=!--q;o()}}else{p._canContinue=true}m.apply(p.c,n)}}});j.each(["wait","repeat","join","then"],function(l,k){j.fn[k]=function(){var n={},m=new f(this,n,e(this,n,[],function(o){m.length=0;Array.prototype.push.apply(m,o)}));return m[k].apply(m,arguments)}});j.fn.join.timing=function(k,m){var l,n=m.c.length;if(typeof m.f.a[0]=="function"){m.b=m.f.a[0]}else{l=m.f.a[0];m.b=m.f.a[1]}m.c.queue(l==null?"fx":l,function(o){m._canContinue=!--n;m.h=m.c;k();o()})};j.fn.then.timing=function(k,l){l.b=l.f.a[0];l.h=l.c;l._canContinue=true};j.fn.wait.timing=function(m,o){var l,k,n;if(typeof o.f.a[0]=="function"){o.b=o.f.a[0]}else{l=o.f.a[0];o.b=o.f.a[1]}if(typeof l=="string"){k=function(){o.c.unbind(l,k).unbind("__unwait__",n);o.h=j(this);o._canContinue=true;m()};n=function(){j(this).unbind(l,k).unbind("__unwait__",n);o.c=o.c.not(this);o._canContinue=o.c.length&&o._canContinue};o.c.bind(l,k)}else{k=g.setTimeout(function(){o.c.unbind("__unwait__",n);o.h=o.c;o._canContinue=true;m()},Math.max(0,l));n=function(){j(this).unbind("__unwait__",n);o.c=o.c.not(this);o._canContinue=o.c.length&&o._canContinue;if(!o.c.length){g.clearTimeout(k)}}}o.c.bind("__unwait__",n)};j.fn.each=function(m){if(!m||m===j){var l={},k=new f(this,l,e(this,l,[],function(n){k.length=0;Array.prototype.push.apply(k,n)}));return k.each()}return d.apply(this,arguments)};j.fn.each.timing=function(l,o,p,n){if(o.f.a[0]&&o.f.a[0]!==j){o._canContinue=true;o.h=d.apply(o.c,o.fs.a);return}var v=o.c.length,u=v,r,m,t=[],s=[],q={};function k(){for(var w=0;w<v;w++){(t[w])()}return q}for(r in f.prototype){q[r]=k}q.length=v;o.c.each(function(w){var x=p.slice();s[w]=[q[w]=this];x.unshift({d:w,_allAction:function(y){if(!--u){m=y.f.h;l()}},_fixOpenLoop:h.all});t[w]=e(j(this),o.f.h,x,function(z){s[w]=z;q.length=0;for(var y=0;y<v;y++){Array.prototype.push.apply(q,s[y])}if(n){n(j.makeArray(q))}})});o.h=q;o._canContinue=true;o.i=function(){if(!u){p.shift();return{c:a(o.c,q),f:m}}};o.d=v;p.unshift(o)};h.all=function(k){j.extend(k.f,{h:j.extend({},k.f),g:"all",a:[]});k._canContinue=null};h.all.timing=function(k,m,l){if(!l.length||!l[0]._fixOpenLoop){throw".all() method must be used after .each() only"}if(!l[0]._allAction){l[0]._fixOpenLoop(m);return}l[0]._allAction(m)};j.fn.repeat.timing=function(n,q,p){var m,r,o,l;if(typeof q.f.a[0]=="function"){q.b=q.f.a[0]}else{if(typeof q.f.a[1]=="function"){m=q.f.a[0];q.b=q.f.a[1]}else{m=q.f.a[0];r=q.f.a[1];q.b=q.f.a[2]}}function k(){q.h=(this===g)?q.c:(q.h?q.h.add(this):j(this));q._canContinue=true;n()}if(m==null){o=function(){j(this).unbind("__unrepeat__",o);q.c=q.c.not(this);q.h=q.c;q._canContinue=q.c.length&&q._canContinue;m=q.c.length&&m};r=true;l=g.setTimeout(function(){l=false;n()},0);q.i=function(){if(!l){q.d++;q.h=q.c;q._canContinue=m==null&&q.c.length;return q}}}else{if(typeof m=="string"){o=function(){j(this).unbind("__unrepeat__",o);q.c=q.c.not(this);q.h=q.h&&q.h.not(this);q._canContinue=q.c.length&&q._canContinue;j(this).unbind(m,k)};q.c.bind(m,k);q.i=function(){if(q._canContinue){q.d++;return q}}}else{o=function(){j(this).unbind("__unrepeat__",o);q.c=q.c.not(this);q.h=q.c;q._canContinue=q.c.length&&q._canContinue;if(!q.c.length){g.clearInterval(m)}};m=g.setInterval(k,Math.max(0,m));q.i=function(){if(q._canContinue){q.d++;return q}}}}q.c.bind("__unrepeat__",o);q.d=0;q.l=function(s){if(s){o.apply(q.c)}else{if(m==null){k()}}};q._fixOpenLoop=h.until;if(r){k()}p.unshift(q)};h.until=function(k){j.extend(k.f,{h:j.extend({},k.f),g:"until",a:[false]});k._canContinue=null};h.until.timing=function(k,m,l){if(!l.length||!l[0]._fixOpenLoop){throw".until() method must be used after .repeat() only"}if(!l[0].l){l[0]._fixOpenLoop(m);return}var n=!!m&&m.f.a[0];if(n==null){n=!m.c.size()}if(typeof n=="function"){n=n.apply(m.c,b(l))}if(typeof n=="object"){n=n.toString()}if(typeof n=="number"){n=l[0].d>=n-1}if(n){m._canContinue=true;m.h=m.c;l.shift().l(n)}else{m=l[0];m.d++;m.l();return m}};j.each(["unwait","unrepeat"],function(l,k){j.fn[k]=function(){return this.trigger("__"+k+"__")}});j.each(["wait","repeat","join","then","unwait","unrepeat"],function(l,k){j[k]=function(){var m=typeof arguments[0]=="string"?Array.prototype.shift.apply(arguments):"";return j.fn[k].apply(c[m]=(c[m]||j("<div>").text(m)),arguments)}});j.each(["bind","on","one","live","delegate"],function(l,k){var m=j.fn[k];j.fn[k]=m&&function(){var n,o,p;for(o=0;o<arguments.length;o++){if(typeof arguments[o]=="function"||(arguments[o]&&typeof arguments[o]=="object")||arguments[o]===false){if(arguments[o]!==j){if(typeof arguments[o]=="function"&&j.guid){arguments[o].guid=arguments[o].guid||j.guid++}n=!n}break}}if(n){return m.apply(this,arguments)}p={};arguments[o]=function(){return(e(j(this),p))()};arguments.length=Math.max(arguments.length,o+1);return new f(m.apply(this,arguments),p)}});j.fn.addTimingSupport=function(){var k={};this.each(function(l,m){if(typeof m=="string"){k[m]=j}if(typeof m=="object"){j.extend(k,m)}});new f(k);return this};j([h,"indexOf","lastIndexOf","replace","substr","substring","toLowerCase","toUpperCase"]).addTimingSupport();function i(n,q,m){if(typeof n=="string"){m=new Function("x","return ["+n+"\n,x]");n=function(s,r){r=m(s);l.x=r[1];return r[0]}}var k=typeof q=="function",p=typeof n=="function",l=function(r){if(arguments.length==1){l.x=r;if(k){q(r)}}else{return o()}};function o(r){r=k?q():l.x;return p?n(r):r}l.x=0;l._={toString:l.$=l.toString=o.toString=o};l.mod=function(r){return i(function(s){return s%r},l)};l.add=function(r){return i(function(s){return s+r},l)};l.neg=function(){return i("-x",l)};l.$$=function(r){return i(r,l)};j.each("abcdefghij",function(r,s){l[r]=l[s]=function(){l(arguments[r])}});return l}j.$$=g.$$=j.X=i;j.fn.$=function(){var k=j.apply(g,arguments);k.prevObject=this;return k}})(jQuery,window);