(function(f){var e="__timeouts",n="__intervals",g={};function d(r,q){r=r||[];for(var p=0;p<r.length;p++){if(r[p]===q){if(p<r.length-1){r[p]=r.pop();p--}else{r.pop()}}}return r}function m(q,p){q=q||[];q.push(p);return q}function j(q){var r={},p={k:g,h:r},s;for(s in q){if(typeof q[s]==="function"){(function(t){r[t]=function(){p=p.next={n:t,a:arguments,k:g};return r}})(s)}}return p}function k(q,s,p){for(var v=q.next,r=s,t=p,w,u;v;v=v.next){w=r[v.n];if(w===b){u=b.call(r,v.a[0],t);if(u){window.clearInterval(t.r);t.x.each(function(){d(f(this).data(n),t.r)});t=u}else{break}}else{if(w===c){c.call(r,v.a[0],v.a[1],t,v);break}else{if(w===h){h.call(r,v.a[0],t,v);break}else{if(w===a){r=a.call(r,v.a[0],t)}else{r=w.apply(r,v.a)}}}}}}function h(t,p,r){var s=this,q=(r&&r.k===g)?r:j(s),u=window.setTimeout(function(){k(q,s,p);s.each(function(){d(f(this).data(e),u)})},Math.max(1,(typeof t==="function"?Number(t.call(s)):t)||0));this.each(function(){f(this).data(e,m(f(this).data(e),u))});return q.h}function l(){this.each(function(){f.each(f(this).data(e)||[],function(){window.clearTimeout(this)})});return this.data(e,[])}function c(u,s,p,r){var t=this,q=(r&&r.k===g)?r:j(t),v=window.setInterval(function(){p.c++;k(q,t,p)},Math.max(1,(typeof u==="function"?Number(u.call(t)):u)||0));p={c:0,x:t,r:v,v:(p&&p.k===g)?p:{},k:g};this.each(function(){f(this).data(n,m(f(this).data(n),v))});if(s){window.setTimeout(function(){p.c++;k(q,t,p)},1)}return q.h}function i(){this.each(function(){f.each(f(this).data(n)||[],function(){window.clearInterval(this)})});return this.data(n,[])}function b(q,p){if(!p||p.k!==g){throw new Error(".until() method cannot be called without previous use of .repeat()")}if(typeof q==="undefined"){q=this.length<=0}if(typeof q==="function"){q=q.call(this,p.c)}if(typeof q==="number"){q=p.c>=q}return q?p.v:false}function a(r,p){if(typeof r==="function"){var q=[];for(;p&&(p.k===g);p=p.v){q.push(p.c)}r.apply(this,q)}return this}function o(p,r,q){if(typeof p==="undefined"){p=""}g[p]=g[p]||f("<div>");return r.apply(g[p],q)}f.fn.extend({wait:h,unwait:l,repeat:c,unrepeat:i,until:b,now:a});f.extend({wait:function(q,p){return o(p,h,arguments)},unwait:function(p){return o(p,l,arguments)},repeat:function(r,q,p){return o(p,c,arguments)},unrepeat:function(p){return o(p,i,arguments)},now:function(q,p){return o(p,a,arguments)}})})(jQuery);