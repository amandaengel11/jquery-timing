(function(g){var e="__timeouts",n="__intervals",f={};function d(q,p){q=q||[];for(var o=0;o<q.length;o++){if(q[o]===p){if(o<q.length-1){q[o]=q.pop();o--}else{q.pop()}}}return q}function m(p,o){p=p||[];p.push(o);return p}function j(p){var q={},o={k:f,h:q},r;for(r in p){if(typeof p[r]==="function"){(function(s){q[s]=function(){o=o.next={n:s,a:arguments,k:f};return q}})(r)}}return o}function k(p,r,o){for(var u=p.next,q=r,s=o,v,t;u;u=u.next){v=q[u.n];if(v===b){t=b.call(q,u.a[0],s);if(t){window.clearInterval(s.r);s.x.each(function(){d(g(this).data(n),s.r)});s=t}else{break}}else{if(v===c){c.call(q,u.a[0],u.a[1],s,u);break}else{if(v===h){h.call(q,u.a[0],s,u);break}else{if(v===a){q=a.call(q,u.a[0],s)}else{q=v.apply(q,u.a)}}}}}}function h(s,o,q){var r=this,p=(q&&q.k===f)?q:j(r),t=window.setTimeout(function(){k(p,r,o);r.each(function(){d(g(this).data(e),t)})},Math.max(1,(typeof s==="function"?Number(s.call(r)):s)||0));this.each(function(){g(this).data(e,m(g(this).data(e),t))});return p.h}function l(){this.each(function(){g.each(g(this).data(e)||[],function(){window.clearTimeout(this)})});return this.data(e,[])}function c(t,r,o,q){var s=this,p=(q&&q.k===f)?q:j(s),u=window.setInterval(function(){o.c++;k(p,s,o)},Math.max(1,(typeof t==="function"?Number(t.call(s)):t)||0));o={c:0,x:s,r:u,v:(o&&o.k===f)?o:{},k:f};this.each(function(){g(this).data(n,m(g(this).data(n),u))});if(r){window.setTimeout(function(){o.c++;k(p,s,o)},1)}return p.h}function i(){this.each(function(){g.each(g(this).data(n)||[],function(){window.clearInterval(this)})});return this.data(n,[])}function b(p,o){if(!o||o.k!==f){throw new Error(".until() method cannot be called without previous use of .repeat()")}if(typeof p==="undefined"){p=this.length<=0}if(typeof p==="function"){p=p.call(this,o.c)}if(typeof p==="number"){p=o.c>=p}return p?o.v:false}function a(q,o){if(typeof q==="function"){var p=[];for(;o&&(o.k===f);o=o.v){p.push(o.c)}q.apply(this,p)}return this}g.fn.extend({wait:h,unwait:l,repeat:c,unrepeat:i,until:b,now:a})})(jQuery);